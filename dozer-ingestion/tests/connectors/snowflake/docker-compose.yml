version: '3.8'
services:
  dozer-snowflake:
    container_name: dozer_snowflake
    networks: ["dozer_net"]
    image: 708185497968.dkr.ecr.ap-southeast-1.amazonaws.com/dozer-snowflake
    build:
      context: ../../../
      dockerfile: snowflake.Dockerfile
    ports:
      - "8080:8080"
      - "50052:50052"
    volumes:
      - ./../../../config/log4rs.sample.yaml:/usr/dozer/log4rs.yaml
      - ./dozer-config.yaml:/usr/dozer/dozer-config.yaml
    command: ""

networks:
  dozer_net:
    enable_ipv6: true
    driver: bridge
    driver_opts:
      com.docker.network.enable_ipv6: "true"
    ipam:
      driver: default
      config:
        - subnet: fd00:0:0:1::/64
          gateway: fd00:0:0:1::1