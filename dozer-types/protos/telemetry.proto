syntax = "proto3";
package dozer.telemetry;

service TelemetryService {
  rpc get_metrics(MetricsRequest) returns (MetricsResponse);
  rpc get_traces(TracesRequest) returns (TracesResponse);
  rpc get_full_traces(FullTracesRequest) returns (FullTracesResponse);
}

enum QueryType {
  QUERY = 0;
  RANGE = 1;
}

message MetricsRequest {
  string app_id = 1;
  QueryType query_type = 2;
  string query = 3;
  uint64 start = 4;
  uint64 end = 5;
  uint32 step = 6;
}

message MetricsResponse { string content = 1; }

message TracesRequest {
  string app_id = 1;
  uint64 start = 4;
  uint64 end = 5;
}

message TracesResponse { string content = 1; }

message FullTracesRequest { repeated string trace_ids = 1; }

message FullTracesResponse { string content = 1; }