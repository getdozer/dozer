
syntax = "proto3";

package dozer.internal;
import "types.proto";

service InternalPipelineService {
  rpc StreamPipelineRequest(PipelineRequest) returns (stream PipelineResponse);
  rpc StreamAliasEvents(AliasEventsRequest) returns (stream AliasRedirected);
}

// ---------------- Api ------------------------
message PipelineRequest {}
message PipelineResponse {
  string endpoint = 1;
  oneof api_event {
    dozer.types.Operation op = 2;
  }
}

message AliasEventsRequest {}

message AliasRedirected {
  string real_name = 1;
  string alias = 2;
}
